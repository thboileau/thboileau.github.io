<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
<title>Restlet framework | FileUpload</title>

  
  
    
      <link rel="stylesheet" href="/css/app.min.css">
    
  



<link rel="stylesheet" type="text/css" href="/css/vendor/magnific-popup.css">

<link rel="stylesheet" href="/css/custom.css" />
<link rel="stylesheet" href="/css/app.min.css">
<link rel="stylesheet" href="/css/vendor/prism.css" />
<link rel="stylesheet" href="/css/vendor/component.css" />


      <script src="/js/main.js"></script>


</head>
<body class="static-nav documentation">

  <nav class="m-navigation m-navigation-site m-navigation-fixed" role="navigation">
  <div class="container-fluid">
    <div class="navigation-group">
      <a class="navigation-logo" href="/"><img src="/images/navbarTop.svg"></a>
      <span id="j-navigation-trigger" class="navigation-trigger"></span>
      <ul class="navigation-list navigation-list-right">
        <li class=""><a class="navigation__link" href="/features">Features</a></li>
        <li class="">
          <a class="navigation__link" href="/downloads/current">Download</a>
        </li>
        <li class="">
            <a class="navigation__link" href="/documentation/tutorials/2.5/">Documentation</a></li>
      </ul>
    </div>
  </div>
</nav>


<main id="main" role="main">
  <div class="documentation-wrapper">
<div class="sidebar-wrapper hidden-xs hidden-sm">
  <aside class="section-bg-mako text-white">
    <nav class="documentation-sidebar" aria-label="Documentation navigation" role="navigation">
      <ul id="accordion" class="nav documentation-nav">
        <li>
          <a href="#submenu-1" class="accordion-toggle toggle-switch"><img src="/images/restlet_white_32.svg">Framework</a>
          <ul id="submenu-1" class="nav panel-switch" role="menu">
            <li>
              <a href="#subsubmenu-1" class="accordion-toggle toggle-switch">User guide</a>
              <ul id="subsubmenu-1" class="nav panel-switch lowest-lewel" role="menu">
                <li><a href="/documentation/user-guide/2.4/introduction/overview" >Part 1 - Introduction</a></li>
                <li><a href="/documentation/user-guide/2.4/core/overview" >Part 2 - Core Restlet</a></li>
                <li><a href="/documentation/user-guide/2.4/editions/overview" >Part 3 - Restlet Editions</a></li>
                <li><a href="/documentation/user-guide/2.4/extensions/overview" class="active" >Part 4 - Restlet Extensions</a></li>
                <li><a href="/documentation/user-guide/2.4/appendices/glossary">Appendices</a></li>
              </ul>
            </li>
            <li><a href="/documentation/tutorials/2.4/overview" >Tutorials</a></li>
            <li><a href="/documentation/javadocs/2.4/" >Javadocs</a></li>
            <li><a target="_blank" href="/documentation/2.4/changelog">Change Log</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </aside>

</div>

<div class="content-wrapper section-bg-white">
  <div class="row hidden-xs hidden-sm">
  <div class="col-md-12">
    <div class="h-cta h-cta--large section-bg-grey">
      <img class="large" src="/images/restlet-framework-dark.svg" alt="Restlet Framework">
      <a href="/downloads/current" class="m-button m-button-flat-green pull-right">Install Framework</a>
    </div>
  </div>
</div>

  <div class="mobile-nav hidden-md hidden-lg">
  <div class="dl-menu-container in-content">
    <div id="dl-menu" class="dl-menuwrapper">
      <button class="dl-trigger">Open Menu</button>
      <ul class="dl-menu">
        <li class="">
          <a href="#">User guide</a>
          <ul class="dl-submenu">
            <li>mobile-nav</li>


      </ul>
    </div>
  </div>
</div>


  <div class="row">
    <div class="col-md-3">
      
<nav class="inner-nav hidden-xs hidden-sm">
  <ul class="content-nav">
    
<nav class="inner-nav hidden-xs hidden-sm">
  <ul class="content-nav">
    <li>
      <a href="/documentation/user-guide/2.4/introduction/overview/">Overview</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/features/">Features</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/">What&#39;s new</a>
        <ul>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.4/">In version 2.4</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.3/">In version 2.3</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.2/">In version 2.2</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.1/">In version 2.1</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/">2</a>
        <ul>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/api/">API improvements</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/engine/">Engine</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/extensions/">Extensions</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/editions/">Editions</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/misc/">Misc</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/migration/">Migration</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
  </ul>
</nav>

  </ul>
</nav>

    </div>
    <div class="col-md-9">
      <div class="documentation-content">
        

        <h1>Apache FileUpload extension</h1>
        <h1 id="introduction">Introduction</h1>
<p>This extension leverages the <a href="http://commons.apache.org/fileupload/">Apache FileUpload
library</a>
to provide a robust, high-performance, Web-based file upload in Restlet
server-side applications.</p>
<h1 id="description">Description</h1>
<p>This extension lets you receive files sent by POST or PUT requests and
to parse the posted entity (which is actually an instance of the
&ldquo;Representation&rdquo; class) and to extract a list of FileItems from it, each
item corresponding to one file uploaded in the posted request, typically
from a Web form.</p>
<p>For additional details, please consult the
<a href="https://javadocs.restlet.talend.com/2.4/jse/ext/org/restlet/ext/fileupload/package-summary.html">Javadocs</a>.</p>
<p>Here is the list of dependencies for this extension:</p>
<ul>
<li><a href="http://www.oracle.com/technetwork/java/javaee/servlet/index.html">Java Servlet</a></li>
<li><a href="http://jakarta.apache.org/commons/fileupload/">Apache Commons FileUpload</a></li>
</ul>
<h1 id="usage-example">Usage example</h1>
<p>This sample code illustrates how to upload files with the FileUpload
extension. It is composed of 3 classes:</p>
<ul>
<li>a resource &ldquo;MyResource&rdquo; which responds to GET and POST requests,</li>
<li>an application called &ldquo;MyApplication&rdquo; which routes all received
requests to the resource,</li>
<li>a component called &ldquo;TestFileUpload&rdquo; which creates a local HTTP
server on port 8182 and contains only one application (one instance
of &ldquo;MyApplication&rdquo;) attached to the path &ldquo;/testFileUpload&rdquo;.</li>
</ul>
<p>Thus, each request to the following uri
&ldquo;http://localhost/testFileUpload&rdquo; will be handled by a new instance of
&ldquo;MyResource&rdquo;.</p>
<p>The single representation of this resource is a web form with a file
select control and a submit button. It allows to set up a request with
an uploaded file that will be posted to the resource. The name of the
file select control (&ldquo;fileToUpload&rdquo;) is referenced by the resource.</p>
<p>Every Resource instance handles the POST request in method &ldquo;accept&rdquo;
which accepts the posted entity as single parameter. The aim of the
MyResource instance is to parse the request, get the file and send
back its content as plain text to the client.</p>
<p>Here is the content of the MyResource#accept method:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a2f">@Post</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span>Representation<span style="color:#bbb"> </span><span style="color:#00a000">accept</span>(Representation<span style="color:#bbb"> </span>entity)<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Representation<span style="color:#bbb"> </span>result<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">if</span><span style="color:#bbb"> </span>(entity<span style="color:#bbb"> </span><span style="color:#666">!=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#a2f;font-weight:bold">if</span><span style="color:#bbb"> </span>(MediaType.<span style="color:#b44">MULTIPART_FORM_DATA</span>.<span style="color:#b44">equals</span>(entity.<span style="color:#b44">getMediaType</span>(),<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">true</span>))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// 1/ Create a factory for disk-based file items</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>DiskFileItemFactory<span style="color:#bbb"> </span>factory<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>DiskFileItemFactory();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>factory.<span style="color:#b44">setSizeThreshold</span>(1000240);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// 2/ Create a new file upload handler based on the Restlet</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// FileUpload extension that will parse Restlet requests and</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// generates FileItems.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>RestletFileUpload<span style="color:#bbb"> </span>upload<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>RestletFileUpload(factory);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// 3/ Request is parsed by the handler which generates a</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// list of FileItems</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>FileItemIterator<span style="color:#bbb"> </span>fileIterator<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>upload.<span style="color:#b44">getItemIterator</span>(entity);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// Process only the uploaded item called &#34;fileToUpload&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// and return back</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#0b0;font-weight:bold">boolean</span><span style="color:#bbb"> </span>found<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#a2f;font-weight:bold">while</span><span style="color:#bbb"> </span>(fileIterator.<span style="color:#b44">hasNext</span>()<span style="color:#bbb"> </span><span style="color:#666">&amp;&amp;</span><span style="color:#bbb"> </span><span style="color:#666">!</span>found)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>FileItemStream<span style="color:#bbb"> </span>fi<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>fileIterator.<span style="color:#b44">next</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#a2f;font-weight:bold">if</span><span style="color:#bbb"> </span>(fi.<span style="color:#b44">getFieldName</span>().<span style="color:#b44">equals</span>(<span style="color:#b44">&#34;fileToUpload&#34;</span>))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>found<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#080;font-style:italic">// consume the stream immediately, otherwise the stream</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#080;font-style:italic">// will be closed.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>StringBuilder<span style="color:#bbb"> </span>sb<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>StringBuilder(<span style="color:#b44">&#34;media type: &#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>sb.<span style="color:#b44">append</span>(fi.<span style="color:#b44">getContentType</span>()).<span style="color:#b44">append</span>(<span style="color:#b44">&#34;\n&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>sb.<span style="color:#b44">append</span>(<span style="color:#b44">&#34;file name : &#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>sb.<span style="color:#b44">append</span>(fi.<span style="color:#b44">getName</span>()).<span style="color:#b44">append</span>(<span style="color:#b44">&#34;\n&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>BufferedReader<span style="color:#bbb"> </span>br<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>BufferedReader(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                            </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>InputStreamReader(fi.<span style="color:#b44">openStream</span>()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>String<span style="color:#bbb"> </span>line<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span><span style="color:#a2f;font-weight:bold">while</span><span style="color:#bbb"> </span>((line<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>br.<span style="color:#b44">readLine</span>())<span style="color:#bbb"> </span><span style="color:#666">!=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                        </span>sb.<span style="color:#b44">append</span>(line);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>sb.<span style="color:#b44">append</span>(<span style="color:#b44">&#34;\n&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>result<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>StringRepresentation(sb.<span style="color:#b44">toString</span>(),<span style="color:#bbb"> </span>MediaType.<span style="color:#b44">TEXT_PLAIN</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#080;font-style:italic">// POST request with no entity.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>setStatus(Status.<span style="color:#b44">CLIENT_ERROR_BAD_REQUEST</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">return</span><span style="color:#bbb"> </span>result;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}</span></span></code></pre></div>
<p>Before running this example, please add the following jars to the
classpath:</p>
<ul>
<li>org.restlet (Restlet API)</li>
<li>org.restlet.ext.fileupload (Restlet extension based on the Apache FileUpload project)</li>
<li>org.apache.commons.fileupload (Apache FileUpload project)</li>
<li>org.apache.commons.io (Apache FileUpload project)</li>
<li>javax.servlet.jar (Servlet archive used by the FileUpload library)</li>
</ul>
<h1 id="links">Links</h1>
<ul>
<li><a href="http://commons.apache.org/fileupload/">Apache FileUpload library</a></li>
<li><a href="../core/base/connectors">Server connectors</a></li>
<li><a href="https://download.restlet.talend.com/technical-resources/restlet-framework/archives/examples/fileupload/2.4/sample.zip" title="Usage example of FileUpload extension">Sample code of FileUpload extension (zip file)</a></li>
</ul>

      </div>
    </div>
  </div>
</div>

  </div>
</main>
    <footer>
  <div class="m-footer skew-top-black">
    <div class="container">
      <div class="row eq-height">
        <div class="col-sm-2">
          <h4>Features</h4>
          <ul>
            <li><a href="/features">Features</a></li>
          </ul>
        </div>
        <div class="col-sm-2">
          <h4>Downloads</h4>
          <ul>
            <li><a href="/downloads/current/">Current Release</a></li>
            <li><a href="/downloads/past/">Other Releases</a></li>
            <li><a href="/downloads/legal-terms/">Legal Terms</a></li>
            <li><a href="/downloads/faq/">FAQ</a></li>
          </ul>
        </div>
        <div class="col-sm-2">
          <h4>Documentation</h4>
          <ul>
            <li><a href="/documentation/user-guide/2.5/">User guide</a></li>
            <li><a href="/documentation/tutorials/2.5/">Tutorials</a></li>
            <li><a href="/documentation/javadocs/2.5/">Javadocs</a></li>
            <li><a href="/documentation/2.5/changelog">Changelog</a></li>
          </ul>
        </div>
      </div>
      <div class="row copyright">
        <div class="col-xs-12 col-md-8">
          <ul class="list-inline">
            <li>&copy; 2025 Qlik All rights reserved.</li>
          </ul>
        </div>
      </div>

    </div>
  </div>

</footer>

    <script type="text/javascript" src="/js/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="/js/modernizr-2.8.3.min.js"></script>
<script type="text/javascript" src="/js/jquery.dlmenu.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/init.js"></script>
<script type="text/javascript" src="/js/prism.js" data-default-language="markup"></script>
<script type="text/javascript" src="/js/app.js"></script>
<script type="text/javascript" src="/js/downloads.js"></script>


</body>
</html>
