<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
<title>Restlet framework | OSGi deployment</title>

  
  
    
      <link rel="stylesheet" href="/css/app.min.css">
    
  



<link rel="stylesheet" type="text/css" href="/css/vendor/magnific-popup.css">

<link rel="stylesheet" href="/css/custom.css" />
<link rel="stylesheet" href="/css/app.min.css">
<link rel="stylesheet" href="/css/vendor/prism.css" />
<link rel="stylesheet" href="/css/vendor/component.css" />


      <script src="/js/main.js"></script>


</head>
<body class="static-nav documentation">

  <nav class="m-navigation m-navigation-site m-navigation-fixed" role="navigation">
  <div class="container-fluid">
    <div class="navigation-group">
      <a class="navigation-logo" href="/"><img src="/images/navbarTop.svg"></a>
      <span id="j-navigation-trigger" class="navigation-trigger"></span>
      <ul class="navigation-list navigation-list-right">
        <li class=""><a class="navigation__link" href="/features">Features</a></li>
        <li class="">
          <a class="navigation__link" href="/downloads/current">Download</a>
        </li>
        <li class="">
            <a class="navigation__link" href="/documentation/tutorials/2.5/">Documentation</a></li>
      </ul>
    </div>
  </div>
</nav>


<main id="main" role="main">
  <div class="documentation-wrapper">
<div class="sidebar-wrapper hidden-xs hidden-sm">
  <aside class="section-bg-mako text-white">
    <nav class="documentation-sidebar" aria-label="Documentation navigation" role="navigation">
      <ul id="accordion" class="nav documentation-nav">
        <li>
          <a href="#submenu-1" class="accordion-toggle toggle-switch"><img src="/images/restlet_white_32.svg">Framework</a>
          <ul id="submenu-1" class="nav panel-switch" role="menu">
            <li>
              <a href="#subsubmenu-1" class="accordion-toggle toggle-switch">User guide</a>
              <ul id="subsubmenu-1" class="nav panel-switch lowest-lewel" role="menu">
                <li><a href="/documentation/user-guide/2.4/introduction/overview" >Part 1 - Introduction</a></li>
                <li><a href="/documentation/user-guide/2.4/core/overview" >Part 2 - Core Restlet</a></li>
                <li><a href="/documentation/user-guide/2.4/editions/overview" >Part 3 - Restlet Editions</a></li>
                <li><a href="/documentation/user-guide/2.4/extensions/overview" >Part 4 - Restlet Extensions</a></li>
                <li><a href="/documentation/user-guide/2.4/appendices/glossary"class="active" >Appendices</a></li>
              </ul>
            </li>
            <li><a href="/documentation/tutorials/2.4/overview" >Tutorials</a></li>
            <li><a href="/documentation/javadocs/2.4/" >Javadocs</a></li>
            <li><a target="_blank" href="/documentation/2.4/changelog">Change Log</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </aside>

</div>

<div class="content-wrapper section-bg-white">
  <div class="row hidden-xs hidden-sm">
  <div class="col-md-12">
    <div class="h-cta h-cta--large section-bg-grey">
      <img class="large" src="/images/restlet-framework-dark.svg" alt="Restlet Framework">
      <a href="/downloads/current" class="m-button m-button-flat-green pull-right">Install Framework</a>
    </div>
  </div>
</div>

  <div class="mobile-nav hidden-md hidden-lg">
  <div class="dl-menu-container in-content">
    <div id="dl-menu" class="dl-menuwrapper">
      <button class="dl-trigger">Open Menu</button>
      <ul class="dl-menu">
        <li class="">
          <a href="#">User guide</a>
          <ul class="dl-submenu">
            <li>mobile-nav</li>


      </ul>
    </div>
  </div>
</div>


  <div class="row">
    <div class="col-md-3">
      
<nav class="inner-nav hidden-xs hidden-sm">
  <ul class="content-nav">
    
<nav class="inner-nav hidden-xs hidden-sm">
  <ul class="content-nav">
    <li>
      <a href="/documentation/user-guide/2.4/introduction/overview/">Overview</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/features/">Features</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/">What&#39;s new</a>
        <ul>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.4/">In version 2.4</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.3/">In version 2.3</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.2/">In version 2.2</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.1/">In version 2.1</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/">2</a>
        <ul>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/api/">API improvements</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/engine/">Engine</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/extensions/">Extensions</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/editions/">Editions</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/misc/">Misc</a>
    </li>
    <li>
      <a href="/documentation/user-guide/2.4/introduction/whats-new/2.0/migration/">Migration</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
  </ul>
</nav>

  </ul>
</nav>

    </div>
    <div class="col-md-9">
      <div class="documentation-content">
        

        <h1>OSGi deployment</h1>
        <h1 id="introduction">Introduction</h1>
<p>This page will explain you how to run your Restlet application in an
OSGi environment such as Eclipse Equinox or Apache Felix.</p>
<p>Since Restlet 2.1 RC2, a new edition of Restlet Framework for OSGi
environements is available as well as an <a href="/downloads/current?distribution=p2&amp;release=stable&amp;edition=osgi">Eclipse update site</a>.</p>
<h1 id="simple-example">Simple example</h1>
<p>Since Restlet 1.1, the integration of Restlet and OSGi has become much
easier. Each Restlet module and library is an OSGi bundle, and the
automatic detection of pluggable connectors and authenticators works in
the same way as for the standalone Restlet mode. Here are some
instructions to get a simple Restlet project working with OSGi:</p>
<ol>
<li>Copy the content of the Restlet distribution under &ldquo;lib&rdquo; folder into
the Eclipse &ldquo;dropins&rdquo; folder, including all JARs and subdirectories</li>
<li>Launch Eclipse 3.4 which should be longer than usual as new plug-ins
are automatically installed</li>
<li>Open &ldquo;Help / About &hellip; / Plug-in Details&rdquo; dialog and check that
Restlet plug-ins are there (&ldquo;Restlet&rdquo; is the provider
name)</li>
<li>Create a new &ldquo;Plug-in Project&rdquo;, name it &ldquo;OsgiUsageTest1&rdquo; and press
&ldquo;Next &gt;&rdquo;</li>
<li>Select the checkbox to generate an Activator and press &ldquo;Finish&rdquo;</li>
<li>In the Dependencies tab of the manifest editor, import the following
packages: org.restlet, org.restlet.data, org.restlet.representation,
org.restlet.resource, org.restlet.security, org.restlet.service,
org.restlet.util</li>
<li>Open the &ldquo;Activator&rdquo; class generated and type the code below:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Activator</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">implements</span><span style="color:#bbb"> </span>BundleActivator<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">private</span><span style="color:#bbb"> </span>Server<span style="color:#bbb"> </span>server;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#00a000">start</span>(BundleContext<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>server<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>Server(Protocol.<span style="color:#b44">HTTP</span>,<span style="color:#bbb"> </span>8554,<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>Restlet()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#a2f">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#00a000">handle</span>(Request<span style="color:#bbb"> </span>request,<span style="color:#bbb"> </span>Response<span style="color:#bbb"> </span>response)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>response.<span style="color:#b44">setEntity</span>(<span style="color:#b44">&#34;Hello world!&#34;</span>,<span style="color:#bbb"> </span>MediaType.<span style="color:#b44">TEXT_PLAIN</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>});<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>server.<span style="color:#b44">start</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#00a000">stop</span>(BundleContext<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>server.<span style="color:#b44">stop</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}</span></span></code></pre></div>
<ol>
<li>Open the Run Configurations dialog</li>
<li>Create a new configuration under the &ldquo;OSGi framework&rdquo; tree node</li>
<li>Deselect all bundles and select the &ldquo;OsgiUsageTest1&rdquo; one</li>
<li>Click on the &ldquo;Add Required Bundles&rdquo; button to add all dependencies</li>
<li>Click on the &ldquo;Run&rdquo; button</li>
<li>Open your browser at the &ldquo;http://localhost:8554/&rdquo; URI</li>
<li>&ldquo;Hello world!&rdquo; should be displayed!</li>
</ol>
<h1 id="complete-example">Complete example</h1>
<p>Now, let&rsquo;s look at a more complete example, leveraging the Jetty
connector and attaching Resources to a Router. For this we will reuse
the Part12 example of the Restlet tutorial.</p>
<ol>
<li>
<p>Create a new &ldquo;Plug-in Project&rdquo;, name it &ldquo;OsgiUsageTest2&rdquo; and press &ldquo;Next &gt;&rdquo;</p>
</li>
<li>
<p>Select the checkbox to generate an Activator and press &ldquo;Finish&rdquo;</p>
</li>
<li>
<p>In the Dependencies tab of the manifest editor, import the following
packages:  org.restlet, org.restlet.data, org.restlet.resource, org.restlet.routing, org.restlet.util</p>
</li>
<li>
<p>Open the &ldquo;Activator&rdquo; class generated and type the code below:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#00f;font-weight:bold">org.osgi.framework.BundleActivator</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#00f;font-weight:bold">org.osgi.framework.BundleContext</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#00f;font-weight:bold">org.restlet.Application</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#00f;font-weight:bold">org.restlet.Component</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#00f;font-weight:bold">org.restlet.data.Protocol</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Activator</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">implements</span><span style="color:#bbb"> </span>BundleActivator<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">private</span><span style="color:#bbb"> </span>Component<span style="color:#bbb"> </span>component;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#00a000">start</span>(BundleContext<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-style:italic">// Create a component</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>component<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>Component();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>component.<span style="color:#b44">getServers</span>().<span style="color:#b44">add</span>(Protocol.<span style="color:#b44">HTTP</span>,<span style="color:#bbb"> </span>8182);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-style:italic">// Create an application</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#a2f;font-weight:bold">final</span><span style="color:#bbb"> </span>Application<span style="color:#bbb"> </span>application<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>Part12_ServerResources();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-style:italic">// Attach the application to the component and start it</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>component.<span style="color:#b44">getDefaultHost</span>().<span style="color:#b44">attachDefault</span>(application);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>component.<span style="color:#b44">start</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#00a000">stop</span>(BundleContext<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>component.<span style="color:#b44">stop</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}</span></span></code></pre></div>
<p>For the rest of the source code, copy and paste from the regular Restlet
tutorial available in the &ldquo;org.restlet.example.tutorial&rdquo; package the
following classes:</p>
<ul>
<li>Part12_ServerResources</li>
<li>OrderResource</li>
<li>OrdersResource</li>
<li>UserResource</li>
</ul>
<p>Now, let&rsquo;s launch our component, using Jetty as our HTTP server:</p>
<ol>
<li>Open the Run Configurations dialog</li>
<li>Create a new configuration under the &ldquo;OSGi framework&rdquo; tree node</li>
<li>Deselect all bundles and select the &ldquo;OsgiUsageTest2&rdquo; and the
&ldquo;org.restlet.ext.jetty&rdquo; bundles</li>
<li>Click on the &ldquo;Add Required Bundles&rdquo; button to add all dependencies</li>
<li>Configure the start order of the bundles:  &ldquo;org.restlet&rdquo; must start
first, give it a start level of &ldquo;1&rdquo; and leave the rest to &ldquo;default&rdquo;</li>
<li>Click on the &ldquo;Run&rdquo; button</li>
<li>Open your browser at the &ldquo;http://localhost:8182/users/scott&rdquo; URI</li>
<li>&lsquo;Account of user &ldquo;scott&rdquo;&rsquo; should be displayed! and the log messages
should reflect that Jetty was started.</li>
</ol>
<p>If you prefer not to rely on start level to select the actual connector
to be used, you can specify the connector helper class to use in the
Server/Client constructors:</p>
<ul>
<li>Client(Context context, List&lt;Protocol&gt; protocols, String helperClass)</li>
<li>Server(Context context, List&lt;Protocol&gt; protocols, String address, int port, Restlet target, String helperClass)</li>
</ul>
<p>Otherwise, it is possible to manually register connectors with the
engine, for example:</p>
<ul>
<li>Engine.getInstance().getRegisteredClients().add(new HttpServerHelper(null));</li>
</ul>
<p>An archive of this test project is <a href="https://download.restlet.talend.com/technical-resources/restlet-framework/archives/examples/osgi/2.4/org.restlet.example.osgi.test.zip" title="OsgiUsageTest2">available here</a> (application/zip, 7 kB).</p>
<h1 id="standalone-equinox-deployment">Standalone Equinox deployment</h1>
<p>Here is a straightforward, light-weight way of setting up an Equinox
OSGi container proposed by Dave Fogel:</p>
<p>​1) You will need the eclipse equinox osgi jar file (from some recent
version of eclipse, in the plugins folder, in this case 3.5M5):</p>
<p>org.eclipse.osgi_3.5.0.v20090127-1630.jar</p>
<p>​2) Download the FileInstall bundle by Peter Kriens, which will monitor
a directory and automatically install bundles it finds there. (for a
longer description you can see
<a href="http://felix.apache.org/documentation/subprojects/apache-felix-file-install.html">http://felix.apache.org/documentation/subprojects/apache-felix-file-install.html</a>)</p>
<p><a href="http://www.aqute.biz/repo/biz/aQute/fileinstall/1.3.4/fileinstall-1.3.4.jar">http://www.aqute.biz/repo/biz/aQute/fileinstall/1.3.4/fileinstall-1.3.4.jar</a></p>
<p>​3) you then create the following directory structure (Note substitute
your actual equinox bundle version for &ldquo;3.X.X&rdquo;):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>my<span style="color:#b62;font-weight:bold">\_</span>equinox/<span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>     org.eclipse.osgi<span style="color:#b62;font-weight:bold">\_</span>3.X.X.jar<span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>     fileinstall-1.3.4.jar<span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>     load/<span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>         configuration/ <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             config.ini</span></span></code></pre></div>
<p>&ldquo;load/&rdquo; is an empty dir, where you will later put the bundles you wish
to test.</p>
<p>&ldquo;config.ini&rdquo; should be a text file with the following lines in it (but
not indented):</p>
<pre><code>osgi.bundles=fileinstall-1.3.4.jar@start \
 eclipse.ignoreApp=true
</code></pre>
<p>​4) run equinox from the command line (make sure to &ldquo;cd&rdquo; to the
&ldquo;my_equinox&rdquo; directory first):</p>
<p><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar org.eclipse.osgi<span style="color:#b62;font-weight:bold">\_</span>3.X.X.jar -console</span></span></code></pre></div>
(or)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar org.eclipse.osgi<span style="color:#b62;font-weight:bold">\_</span>3.X.X.jar -console <span style="color:#666">7777</span> &amp;</span></span></code></pre></div>
<p>This will start up equinox with a command-line console. if you run the
first version above, you will enter the console directly. This can be
inconvenient if you have other things to do on the command line. Using
the 2nd version will launch equinox in a new process and tell it to
listen on port 7777 for telnet connections. To connect to the running
osgi console, you then type:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>telnet locahost <span style="color:#666">7777</span></span></span></code></pre></div>
<p>​5) type &ldquo;help&rdquo; in the osgi console for a list of commands. To quickly
check the status of all installed bundles, type (where &ldquo;osgi&gt;&rdquo; is the
osgi command prompt):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>osgi<span style="color:#b62;font-weight:bold">\&gt;</span> ss</span></span></code></pre></div>
<p>&ldquo;ss&rdquo; stands for &ldquo;short status&rdquo;, and in this case you should see
something like:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>id State Bundle <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span><span style="color:#666">0</span> ACTIVE org.eclipse.osgi<span style="color:#b62;font-weight:bold">\_</span>3.X.X <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span><span style="color:#666">1</span> ACTIVE biz.aQute.fileinstall<span style="color:#b62;font-weight:bold">\_</span>1.3.4</span></span></code></pre></div>
<p>​6) copy any bundles you want to install to the &ldquo;load/&rdquo; directory. The
FileInstall bundle will automatically attempt to load and start these
bundles. If you add in the bundles in random order, you may see some
temporary error messages complaining about missing dependencies, but
these should resolve themselves as the rest of your bundles load. you
may again type &ldquo;ss&rdquo; in the osgi console to see the status of the
bundles.</p>
<p>In general, you can use the Run Configurations dialog in eclipse to make
sure you have a compatible set of bundles satisfying all their mandatory
dependencies, and then copy that set into the /load directory. Let me
know if you have any problems with this setup.</p>
<h1 id="issues-when-using-restlet-within-osgi">Issues when using Restlet within OSGi</h1>
<h2 id="using-client-connectors">Using client connectors</h2>
<p>You need to be very careful when using client connectors within an OSGi
container. You must be sure that the bundle providing the connector is
already loaded when trying to add the client connector. Otherwise I&rsquo;ll
see something like that in the trace:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Internal Connector Error <span style="color:#666">(</span>1002<span style="color:#666">)</span> - No available client connector supports the
</span></span><span style="display:flex;"><span>requiredprotocol: <span style="color:#b44">&#39;HTTPS&#39;</span>. Please add the JAR of a matching connector to your
</span></span><span style="display:flex;"><span>classpath.</span></span></code></pre></div>
<p>In this case, before adding your client connector, you need to check the
loaded bundles and before executing your REST request, the registered
client connector. <br>
Here is the code to see all registered client connectors:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List<span style="color:#666">&lt;</span>ConnectorHelper<span style="color:#666">&lt;</span>Client<span style="color:#666">&gt;&gt;</span><span style="color:#bbb"> </span>clients<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>Engine.<span style="color:#b44">getInstance</span>().<span style="color:#b44">getRegisteredClients</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>System.<span style="color:#b44">out</span>.<span style="color:#b44">println</span>(<span style="color:#b44">&#34;Connectors - &#34;</span><span style="color:#666">+</span>clients.<span style="color:#b44">size</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">for</span>(ConnectorHelper<span style="color:#666">&lt;</span>Client<span style="color:#666">&gt;</span><span style="color:#bbb"> </span>connectorHelper<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>clients)<span style="color:#bbb"> </span>{<span style="color:#bbb">   
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#b44">out</span>.<span style="color:#b44">println</span>(<span style="color:#b44">&#34;connector = &#34;</span><span style="color:#666">+</span>connectorHelper.<span style="color:#b44">getClass</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}</span></span></code></pre></div>
<p>You can use OSGi bundle listeners to see if necessary bundles are
loaded. Here is a sample of code:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic">// Checking the bundle loading in the future</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>bundleContext.<span style="color:#b44">addBundleListener</span>(<span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>BundleListener()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#00a000">bundleChanged</span>(BundleEvent<span style="color:#bbb"> </span>event)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#a2f;font-weight:bold">if</span><span style="color:#bbb"> </span>(event.<span style="color:#b44">getBundle</span>().<span style="color:#b44">getSymbolicName</span>().<span style="color:#b44">equals</span>(<span style="color:#b44">&#34;org.restlet.ext.ssl&#34;</span>)<span style="color:#bbb">             
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                        </span><span style="color:#666">&amp;</span><span style="color:#bbb"> </span>event.<span style="color:#b44">getBundle</span>().<span style="color:#b44">getState</span>()<span style="color:#666">==</span>BundleEvent.<span style="color:#b44">RESOLVED</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">           
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>registerClientConnector();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>});<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#080;font-style:italic">// Checking if the bundle is already present</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>Bundle<span style="color:#666">[]</span><span style="color:#bbb"> </span>bundles<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>bundleContext.<span style="color:#b44">getBundles</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">for</span><span style="color:#bbb"> </span>(Bundle<span style="color:#bbb"> </span>bundle<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>bundles)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">if</span><span style="color:#bbb"> </span>(bundle.<span style="color:#b44">getSymbolicName</span>().<span style="color:#b44">equals</span>(<span style="color:#b44">&#34;org.restlet.ext.ssl&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">              </span><span style="color:#666">&amp;&amp;</span><span style="color:#bbb"> </span>bundle.<span style="color:#b44">getState</span>()<span style="color:#666">==</span>BundleEvent.<span style="color:#b44">RESOLVED</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>registerClientConnector();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}</span></span></code></pre></div>
<p>The registerClientConnector method simply does something like that:
component.getClients().add(Protocol.HTTPS);.</p>
<h1 id="other-references">Other references</h1>
<h2 id="standalone-equinox">Standalone Equinox</h2>
<ul>
<li>David Fogel - Detailed instruction <a href="http://restlet.tigris.org/ds/viewMessage.do?dsForumId=4447&amp;dsMessageId=1344544">in this mail</a></li>
</ul>

      </div>
    </div>
  </div>
</div>

  </div>
</main>
    <footer>
  <div class="m-footer skew-top-black">
    <div class="container">
      <div class="row eq-height">
        <div class="col-sm-2">
          <h4>Features</h4>
          <ul>
            <li><a href="/features">Features</a></li>
          </ul>
        </div>
        <div class="col-sm-2">
          <h4>Downloads</h4>
          <ul>
            <li><a href="/downloads/current/">Current Release</a></li>
            <li><a href="/downloads/past/">Other Releases</a></li>
            <li><a href="/downloads/legal-terms/">Legal Terms</a></li>
            <li><a href="/downloads/faq/">FAQ</a></li>
          </ul>
        </div>
        <div class="col-sm-2">
          <h4>Documentation</h4>
          <ul>
            <li><a href="/documentation/user-guide/2.5/">User guide</a></li>
            <li><a href="/documentation/tutorials/2.5/">Tutorials</a></li>
            <li><a href="/documentation/javadocs/2.5/">Javadocs</a></li>
            <li><a href="/documentation/2.5/changelog">Changelog</a></li>
          </ul>
        </div>
      </div>
      <div class="row copyright">
        <div class="col-xs-12 col-md-8">
          <ul class="list-inline">
            <li>&copy; 2025 Qlik All rights reserved.</li>
          </ul>
        </div>
      </div>

    </div>
  </div>

</footer>

    <script type="text/javascript" src="/js/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="/js/modernizr-2.8.3.min.js"></script>
<script type="text/javascript" src="/js/jquery.dlmenu.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/init.js"></script>
<script type="text/javascript" src="/js/prism.js" data-default-language="markup"></script>
<script type="text/javascript" src="/js/app.js"></script>
<script type="text/javascript" src="/js/downloads.js"></script>


</body>
</html>
